## Part 1. Установка ОС
+ Скриншот вывода команды

![](img/1.png)

## Part 2. Создание пользователя
+  Вызов команды для создания пользователя

![](img/2_1.png)

![](img/2_2.png)

+ Вывод команды cat /etc/passwd

![](img/2_3.png)

## 3. Настройка сети ОС
+ Задание названия машины

![](img/3_1.png)

+ Установка времени

![](img/3_2.png)

+ Вывод названий сетевых интерфейсов

![](img/3_3.png)

![](img/3_4.png)


+ `Интерфейс lo (loopback)` - это виртуальный интерфейс. Он является частью внутреннего стека. Он используется машиной для коммуникации с самим собой и полезен в диагностике и устранении неполадок.

+ Вывод IP

![](img/3_5.png)

![](img/3_6.png)

+ `DHCP (Dynamic Host Configuration Protocol англ.)` — протокол динамической настройки узла, позволяющий устройствам автоматически получать IP-адрес, данные о DNS-сервере и другие параметры, необходимые для работы в сети. Включает в себя следующие этапы: discovery (поиск), offer (предложение), request (запрос), acknowledgment (подтверждение).

+ Вывод внешнего IP

![](img/3_7.png)

![](img/3_8.png)

+ Вывод внутреннего IP

![](img/3_9.png)

![](img/3_10.png)

+ Редактируем конфига под нужные настройки используя `nano /etc/netplan/00-installer-config.yaml`
- Применяем изменения с помощью команды `sudo netplan apply`
- Перезагружаем систему `reboot`

![](img/3_11.png)

+ Проверяем пинг командой `ping 1.1.1.1` и `ping ya.ru`

![](img/3_12.png)

## 4. Обновление ОС
+ Обновление осуществлено. Обновления отсутствуют

![](img/4_1.png)

## 5. Использование команды sudo
+ `Sudo` — команда, которая наделяет правами суперпользователя. Ее используют для выполнения с правами администратора. 
+ меняем hostname

![](img/5_1.png)

![](img/5_2.png)


## Part 6. Установка и настройка службы времени
- Проверяем есть ли обновления для apt-get `sudo apt-get update` и если все нормально устанавливаем ntp `sudo apt-get install ntp`

![](img/6_1.png)

- Открываем файл с наименованием серверов `sudo vim /etc/ntp.coef` и дописываем сервера откуда будет браться время `ubuntu.pool.ntp.org` активируем NTP командой `sudo timedatectl set-ntp on`

![](img/6_2.png)

![](img/6_3.png)

- Устанавливаем systemd-timesyncd командой `sudo apt install systemd-timesyncd`

![](img/6_4.png)

- Активируем NTP командой `sudo timedatectl set-ntp on`

![](img/6_5.png)

- Проверяем результат и видим, что переменная `NTPSynchronized=yes`

![](img/6_6.png)

## Part 7. Установка и использование текстовых редакторов
- Создаем файл через команду `vim test_vim.txt` прописываем в файле ник. Закрываем через команду esc: и вводим `wq`

![](img/7_1.png)

- NANO Создаем файл через команду `nano test_nano.txt` прописываем в файле ник. Закрываем через команду cntrl+O, не изменяем имя файла и нажимаем enter, для выхода нахимаем cntrl+X

![](img/7_2.png)

- Устанавливаем joe через команду `sudo apt install joe`. Создаем и открываем файл через команду `joe test_joe.txt`. Сохраняем файл через cntrl+k, для выхода нахимаем cntrl+X.

![](img/7_3.png)

![](img/7_4.png)

- Открываем файл через команду `vim test_vim.txt`, открываем на редактирование через команду shift+i, прописываем в файле `21 Shcool 21`. Закрываем без сохранения через команду esc: и вводим `q!`

![](img/7_5.png)

- Открываем файл через команду `nano test_nano.txt`, прописываем в файле `21 Shcool 21`. Закрываем без сохранения через команду shift+X и вводим `n`

![](img/7_6.png)

- Открываем файл через команду `joe test_joe.txt`, прописываем в файле `21 Shcool 21`. Закрываем без сохранения через команду ctrl+c и вводим `y`

![](img/7_7.png)

- Открываем файл через команду `vim test_vim.txt `, открываем на редактирование через команду shift+:, прописываем '/ник'. То, что мы ищем, будет выделяться

![](img/7_8.png)

- Для того чтобы заменить слово есть 3 варианта:
- `:%s/слово/новое_слово/g` - заменить все вхождения слова в файле на 'новое_слово'.
- `:%s/слово/новое_слово/gc` - то же, но с подтверждением замены каждого слова. Нажмите y для замены, n для пропуска.
- `:s/слово/новое_слово/g` - заменяет только первое вхождение на текущей строке.

![](img/7_9.png)

![](img/7_10.png)

- Открываем файл через команду `nano test_nano.txt `, открываем на поиск через команду Ctrl+W, нажимаем enter `ник`. То, что мы ищем, будет выделяться стрелкой.
  
![](img/7_11.png)

+ Для начала откроем файл с которым будем работать, далее нажимаем комбинацию ALT+R и вводим то что ищем, жмем ENTER. На следующем шаге вводим то на что заменяем и снова жмакаем по ENTER. Клавишей Y мы подтверждаем одноразовую замену, а клавишей A — заменить все.

![](img/7_12.png)

![](img/7_13.png)

- Открываем файл через команду `joe test_joe.txt `, открываем на поиск через команду Ctrl+K,добавляем /`ник` нажиимаем enter. То что мы ищем, будет выделено.

![](img/7_14.png)

- Открываем файл через команду `joe test_joe.txt `, открываем на поиск через команду Ctrl+K,добавляем /`ник` нажиимаем enter. То что мы ищем, будет контуром.
- Для замены нажмите Ctrl + K, затем введите `:21 school 21` и нажмите Enter
- Для замены всех вхождений фразы используйте Alt + G.
- Чтобы сохранить изменения и выйти, нажмите Ctrl + K, затем X.

![](img/7_15.png)

## 8. Установка и базовая настройка сервиса SSHD
- Запускаем установку SSHD через команду `sudo apt install openssh-server`

![](img/8_1.png)

- Добавим автостарт службы при запуске системы командой `sudo systemctl enable ssh`

![](img/8_2.png)

- Рестартим ssh и проверяем чтобы он был enable `systemctl is-enabled ssh`

![](img/8_3.png)

- Откроем файл конфигурации SSH для редактирования `nano /etc/ssh/sshd_config` и дописываем `Port 2022`

![](img/8_4.png)

- Чтобы изменения вступли в силу рестартим систему `sudo systemctl restart sshd` 

![](img/8_5.png)

- Проверяем изменения командой `ps aux | grep sshd` 

![](img/8_6.png)

+ Ключи -tan означают:
  1. -t: Отображает только TCP соединения.
  2. -a: Показывает все активные сетевые соединения и прослушиваемые порты.
  3. -n: Отображает адреса и порты в числовом формате, без попытки определить доменное имя.
+ Значение столбцов таблицы:
  1. Proto - протокол используемый сокетом.
  2. Recv-Q - количество байтов, не скопированных локальным приложением.
  3. Send-Q - количество байтов, не подтвежденных удаленным хостом.
  3. Local Address - адрес и номер порта докального конца сокета.
  4. Foreign Address - адрес и номер порта удаленного конца сокета

- Используем команду для проверки `netstat -tan` вывод содержит `tcp 0 00.0.0.0:2022 0.0.0.0:* LISTEN`

![](img/8_7.png)

## Part 9. Установка и использование утилит top, htop
- Для того чтобы открыть top прописываем `top`

![](img/9_1.png)

- uptime `2:17`
- user `1`
- загрузка системы `по нулям`
- общее количество процессов `102`
- загрузку cpu `0`
- загрузку памяти

![](img/9_2.png)

- `677` - pid процесса занимающего больше всего памяти. Комбинация shift+M

![](img/9_3.png)

- `1 system` - pid процесса, занимающего больше всего процессорного времени. Комбинация shift+P

![](img/9_4.png)

- процессы отсортированные по PID через F6

![](img/9_5.png)

- процессы отсортированные по PERCENT_CPU через F6

![](img/9_6.png)

- процессы отсортированные по PERCENT_MEM через F6

![](img/9_7.png)

- процессы отсортированные по TIME через F6

![](img/9_8.png)

- процессы отсортированные по TIME через F4 + sshd

![](img/9_9.png)

- процессы отсортированные по TIME через F3 + syslog

![](img/9_10.png)

- процессы выведенные через настройку F2 -> Hostname, clock, uptime

![](img/9_11.png)

## Part 10. Использование утилиты fdisk
- Вывод команды `fdisk -l`

![](img/10_1.png)

- Название жесткого диска – `VBOX HARDDISK`
- Размер жесткого диска – `15,5 GiB`
- Количество секторов жесткого диска – `31774352`
- swap жесткого диска определяем через команду `free -h`

![](img/10_2.png)

## Part 11. Использование утилиты df

- Запуск команды `df /`

![](img/11_1.png)

- размер раздела

![](img/11_2.png)

- размер занятого пространства

![](img/11_3.png)

- размер свободного пространства

![](img/11_4.png)

- процент использования

![](img/11_41.png)

- Единица измерения Кб

![](img/11_5.png)

- Запуск команды `df – TH /`

![](img/11_6.png)

- размер раздела

![](img/11_7.png)

- размер занятого пространства

![](img/11_8.png)

- размер свободного пространства

![](img/11_9.png)

- процент использования

![](img/11_10.png)

- тип файловой системы для раздела

![](img/11_11.png)

## Part 12. Использование утилиты du
- Запуск команды du `sudo du`

![](img/12_1.png)

- Выводим размер папок /home, /var, /var/log (в байтах) с флагами -s -h `sudo du -s -h /`

![](img/12_2.png)

- Выводим размер всего содержимого в /var/log , используя * с флагами -s -h `sudo du -s -h /var/log/*`

![](img/12_3.png)


## Part 13. Установка и использование утилиты **ncdu**
- Установка ncdu через команду `sudo apt install ncdu`

![](img/13_1.png)

- Выводим размер папок /home `sudo ncdu /home`

![](img/13_2.png)

- Выводим размер папок /var `sudo ncdu /var`

![](img/13_3.png)

- Выводим размер папок /var/log `sudo ncdu /var/log`

![](img/13_4.png)

## Part 14. Работа с системными журналами
- откроем логи для просмотра и анализа `nano /var/log/dmesg`

![](img/14_1.png)

- откроем логи для просмотра и анализа `nano /var/log/syslog`

![](img/14_2.png)

- откроем логи для просмотра и анализа `nano /var/log/auth.log`

![](img/14_3.png)

- найдем в файле логов auth.log успешный вход в систему при запуске ПК 

![](img/14_4.png)

- перезапустим службу sshd командой `sudo systemctl restart sshd.`

![](img/14_5.png)

- в файлах логов syslog находим сообщение о рестарте

![](img/14_6.png)

## Part 15. Использование планировщика заданий CRON
- Запустим crontab командой `crontab -e`, после запуска необходимо выбрать в каком редакторе открыть, выбираем nano `5`
- Добавляем строчку `*/2 * * * * uptime` в файл и выходим с сохранением

![](img/15_1.png)

- Смотрим появились ли задачи командой `crontab -l`, видим строчку `*/2 * * * * uptime`, значит все хорошо

![](img/15_2.png)

- Открываем лог и смотрим выполняется ли задача раз в 2 минуты `nano /var/log/syslog`

![](img/15_3.png)

- Удаляем все задания из планировщика командой `crontab -r`, проверяем есть ли задания командой `crontab -l` и видим что ничего не осталось.

![](img/15_4.png)

